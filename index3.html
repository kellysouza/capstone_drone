<!DOCTYPE html>
<html>
  <head>
    <title>Hello world</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/blog-home.css" rel="stylesheet">
  </head>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    var socket = io.connect('localhost:3000');
    function installDrone(){
      socket.emit('installDrone');
            document.getElementById('message').innerHTML = "Installing Drone!";
            console.log("Installing");
        };
    function connectDrone(){
      socket.emit('connectDrone');
            document.getElementById('message').innerHTML = "Connecting Drone!";
            console.log("connecting");
        };
    function takeOff(){
      socket.emit('takeOff');
            document.getElementById('message').innerHTML = "taking off!";
            console.log("Flying");
        };
    function land(){
      socket.emit('land');
            document.getElementById('message').innerHTML = "landing!";
            console.log("landing");
        };
    function turnLeft(){
      socket.emit('turnLeft');
            document.getElementById('message').innerHTML = "turning left!";
            console.log("turning left");
        };
    function turnRight(){
      socket.emit('turnRight');
            document.getElementById('message').innerHTML = "turning right!";
            console.log("turning right");
        };
    function search(){
      socket.emit('search');
            document.getElementById('message').innerHTML = "searching!";
            console.log("searching");
        };
    function streamVideo(){
      socket.emit('streamVideo');
            document.getElementById('message').innerHTML = "Streaming Video!";
            console.log("searching");
            document.getElementById('video').innerHTML = "<iframe width='640' height='360' src='http://127.0.0.1:8000/index.html'></iframe>";
        };
    function findPerson(){
      socket.emit('findPerson');
            document.getElementById('message').innerHTML = "Getting Image!";
            console.log("image");
            // document.getElementById('image').innerHTML = "<iframe width='640' height='360' src='http://127.0.0.1:8080/index.html'></iframe>";

        };
    function analyzePerson(){
      socket.emit('analyzePerson');
            document.getElementById('message').innerHTML = "Getting Image!";
            console.log("image html");
            // document.getElementById('image').innerHTML = "<img alt='Embedded Image' src='data:image/png;base64, " + base64Image + " />";
      };
    socket.on('analyzeComplete', function(data){
            console.log("COMPLETE");
            var src = "'data:image/png;base64," + data.image + "'"
            // console.log(src);
            document.getElementById('image').innerHTML = "<img alt='Embedded Image' src=" + src + "height='100'/>";
      });


  </script>
  <body>

    <div id="message"></div>
      <br>
      <div id="flight">
    <!-- <button type="button" name="button" onclick="installDrone()">Install</button>
      <br />
    <button type="button" name="button" onclick="connectDrone()">Connect</button>
      <br /> -->
    <button id="up" type="button" name="button" onclick="takeOff()">Take Off</button>
    <button id="down" type="button" name="button" onclick="land()">Land</button>
    <button type="button" name="button" onclick="streamVideo()">Stream Video</button>
      <br />
    <div id="video"></div>
      <br />
    <button id="left" type="button" name="button" onclick="turnLeft()">Turn Left</button>
    <button id="right" type="button" name="button" onclick="turnRight()">Turn Right</button>

    </div>
    <div id="analysis">
          <br />
    <button type="button" name="button" onclick="findPerson()">Find Person</button>
        <br />
    <button type="button" name="button" onclick="analyzePerson()">Analyze Person</button>
        <br />
        <br />
        <br />
    </div>
    <div id="image">IMAGE HERE</div>
  </body>
</html>
